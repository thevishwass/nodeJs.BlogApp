<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-white min-h-screen flex p-6 gap-6">

  <!-- Sidebar -->
  <div class="bg-gray-900 sticky top-6 rounded-xl shadow-xl h-fit p-10 w-full max-w-xl border border-gray-800"> 
    <h1 class="text-3xl font-bold text-center mb-8 text-blue-400">Welcome, <%= user.name %>!</h1>

    <div class="space-y-4 text-lg text-gray-300">
      <div class="flex justify-between border-b border-gray-700 pb-2">
        <span class="text-gray-400">Username:</span>
        <span class="text-white font-medium"><%= user.username %></span>
      </div>
      <div class="flex justify-between border-b border-gray-700 pb-2">
        <span class="text-gray-400">Email:</span>
        <span class="text-white font-medium"><%= user.emailId %></span>
      </div>
      <div class="flex justify-between border-b border-gray-700 pb-2">
        <span class="text-gray-400">Age:</span>
        <span class="text-white font-medium"><%= user.age %></span>
      </div>
    </div>

    <div class="mt-10 text-center">
      <a href="/logout" class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded-md font-semibold transition-all duration-200">
        Logout
      </a>
    </div>
  </div>

  <!-- Posts Section -->
  <div class="posts w-full h-full">
    <!-- Post Form -->
    <form method="POST" action="/post" class="mb-6">
      <textarea 
        class="w-full rounded-lg px-4 py-4 border border-gray-800 outline-none bg-gray-900 text-white resize-none" 
        placeholder="Write anything..." 
        required
        name="content"
        rows="2"
      ></textarea>
      <input class="text-sm bg-blue-600 mt-2 rounded-md px-4 py-2 cursor-pointer" type="submit" value="Create New Post">
    </form>

    <!-- Posts List -->
    <h1 class="text-3xl text-gray-300 font-bold mt-4 mb-4">Your Posts</h1>

    <% user.posts.slice().reverse().forEach(function(post) { %>
      <div class="singlePost border border-gray-800 w-full rounded-md p-4 mb-4">
        <h3 class="text-blue-400 mb-2 text-sm">@<%= user.username %></h3>
        <p class="text-white"><%= post.content %></p>

        <div class="mt-3 flex items-center flex-wrap gap-3">
          <p class="text-sm text-gray-500 font-semibold"><%= post.likes.length %> Likes</p>

          <a href="/like/<%= post._id %>" class="text-sm font-bold text-white">
            <%= post.likes.includes(user._id) ? "❤️ LIKED" : "🤍 LIKE" %>
          </a>

          <a class="text-yellow-400 text-sm font-semibold" href="/edit/<%= post._id %>">Edit</a>

          <form action="/delete/<%= post._id %>?_method=DELETE" method="POST" class="inline">
            <button type="submit" class="text-red-600 font-semibold text-sm">Delete</button>
          </form>
        </div>
      </div>
    <% }) %>

  </div>

</body>
</html>
